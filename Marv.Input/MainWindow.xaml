<Window x:Class="Marv.Input.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:local="clr-namespace:Marv.Input"
        xmlns:marv="http://dnvgl.com/marv"
        xmlns:oxy="http://oxyplot.codeplex.com"
        xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Name="Root"
        Title="MARV - Input Designer"
        WindowState="Maximized">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Marv.Common;component/ResourceDictionary.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="BarSeriesStyle" TargetType="Border">
                <Setter Property="Background" Value="Red" />
                <Setter Property="Opacity" Value="0.5" />
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="32" />
        </Grid.RowDefinitions>

        <telerik:RadDocking Grid.Row="0"
                            HasDocumentHost="False">
            <telerik:RadDocking.Resources>
                <Style TargetType="telerik:RadPane">
                    <Setter Property="CanFloat" Value="False" />
                    <Setter Property="CanUserClose" Value="False" />
                    <Setter Property="CanUserPin" Value="False" />
                </Style>
            </telerik:RadDocking.Resources>

            <telerik:RadSplitContainer>
                <!-- InputGrid and Plot -->
                <telerik:RadSplitContainer Orientation="Vertical">
                    <telerik:RadPaneGroup>
                        <telerik:RadPane Header="Input">
                            <!-- Input Grid View -->
                            <local:LineDataControl x:Name="LineDataControl"
                                                   CurrentGraphData="{Binding ElementName=Root, Path=Graph.Data, Mode=TwoWay}"
                                                   LineData="{Binding ElementName=Root, Path=LineData, Mode=TwoWay}"
                                                   SelectedSectionId="{Binding ElementName=Root, Path=SelectedSectionId, Mode=TwoWay}"
                                                   Vertex="{Binding ElementName=Root, Path=Graph.SelectedVertex}"
                                                   SelectedYear="{Binding ElementName=Root, Path=SelectedYear, Mode=TwoWay}"/>
                        </telerik:RadPane>
                    </telerik:RadPaneGroup>

                    <telerik:RadPaneGroup>
                        <telerik:RadPane Header="DataPlot">
                            <Grid>
                                <oxy:PlotView IsLegendVisible="True"
                                              Model="{Binding ElementName=Root, Path=DataPlotModel}"
                                              Visibility="Collapsed" />

                                <local:LineDataChart CellModels="{Binding ElementName=Root, Path=ChartCellModels}"
                                                     IsEditEnabled="{Binding ElementName=Root, Path=IsChartEditEnabled}"
                                                     LineData="{Binding ElementName=Root, Path=LineData}"
                                                     SectionId="{Binding ElementName=Root, Path=SelectedSectionId, Mode=TwoWay}"
                                                     Vertex="{Binding ElementName=Root, Path=Graph.SelectedVertex}"
                                                     XTitle="{Binding ElementName=Root, Path=XTitle}"
                                                     Year="{Binding ElementName=Root, Path=SelectedYear, Mode=TwoWay}"/>
                            </Grid>
                        </telerik:RadPane>
                    </telerik:RadPaneGroup>
                </telerik:RadSplitContainer>

                <!-- Graph -->
                <telerik:RadPaneGroup>
                    <telerik:RadPane Header="Network">

                        <!-- GraphControl -->
                        <marv:GraphControl Name="GraphControl"
                                           Background="WhiteSmoke"
                                           Graph="{Binding ElementName=Root, Path=Graph, Mode=TwoWay}" />

                    </telerik:RadPane>
                </telerik:RadPaneGroup>

                <!-- Vertex -->
                <telerik:RadPaneGroup>
                    <telerik:RadPane Header="Node">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                            </Grid.RowDefinitions>

                            <!-- Vertex Combo Box -->
                            <telerik:RadComboBox Grid.Row="0"
                                                 CanAutocompleteSelectItems="True"
                                                 CanKeyboardNavigationSelectItems="True"
                                                 DisplayMemberPath="Name"
                                                 IsEditable="True"
                                                 IsFilteringEnabled="True"
                                                 IsSynchronizedWithCurrentItem="False"
                                                 ItemsSource="{Binding ElementName=Root, Path=Graph.Vertices}"
                                                 Margin="5"
                                                 OpenDropDownOnFocus="True"
                                                 SelectedIndex="0"
                                                 SelectedItem="{Binding ElementName=Root, Path=Graph.SelectedVertex, Mode=TwoWay}"
                                                 TextSearchMode="Contains" Grid.ColumnSpan="2" />

                            <!-- Vertex Control -->
                            <marv:VertexControl Name="VertexControl"
                                                Grid.Row="1"
                                                IsEditable="True"
                                                IsEvidenceVisible="True"
                                                IsInputVisible="True"
                                                IsToolbarVisible="False"
                                                IsValueVisible="False"
                                                Margin="5"
                                                Vertex="{Binding ElementName=Root, Path=Graph.SelectedVertex}"
                                                Visibility="{Binding ElementName=Root, Path=Graph.SelectedVertex, Converter={StaticResource ResourceKey=NullToVisibility}}" />
                        </Grid>
                    </telerik:RadPane>
                </telerik:RadPaneGroup>
            </telerik:RadSplitContainer>
        </telerik:RadDocking>

        <local:StatusControl Grid.Row="1"
                             Notifications="{Binding ElementName=Root, Path=Notifications, Mode=TwoWay}" />
    </Grid>
</Window>